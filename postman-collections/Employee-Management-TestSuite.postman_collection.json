{
	"info": {
		"_postman_id": "employee-management-test-suite",
		"name": "Employee Management API - Test Suite",
		"description": "Automated test suite for the Employee Management API with comprehensive validation, error handling tests, and workflow scenarios. Includes pre-request scripts and test assertions.",
		"version": "1.0.0",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "noauth"
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"exec": [
					"// Global pre-request script",
					"console.log('Starting test: ' + pm.info.requestName);",
					"",
					"// Set common headers and variables",
					"pm.globals.set('timestamp', new Date().toISOString());",
					""
				],
				"type": "text/javascript"
			}
		},
		{
			"listen": "test",
			"script": {
				"exec": [
					"// Global test script",
					"pm.test('Response time is acceptable', function () {",
					"    pm.expect(pm.response.responseTime).to.be.below(2000);",
					"});",
					"",
					"pm.test('Response has proper content type', function () {",
					"    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
					"});",
					""
				],
				"type": "text/javascript"
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:8081/api",
			"type": "string"
		},
		{
			"key": "apiVersion",
			"value": "v1",
			"type": "string"
		},
		{
			"key": "createdEmployeeId",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "1. System Health Check",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/{{apiVersion}}/employees/health",
					"host": ["{{baseUrl}}"],
					"path": ["{{apiVersion}}", "employees", "health"]
				}
			},
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Health check returns 200 OK', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test('Health check response is success', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.success).to.be.true;",
							"    pm.expect(response.message).to.include('healthy');",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			]
		},
		{
			"name": "2. Create Test Employee",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"firstName\": \"Test\",\n  \"lastName\": \"Employee\",\n  \"email\": \"test.employee@company.com\",\n  \"phone\": \"+1-555-0199\",\n  \"department\": \"QA\",\n  \"position\": \"Test Engineer\",\n  \"salary\": 75000.00,\n  \"hireDate\": \"2024-01-01\",\n  \"managerId\": null,\n  \"isActive\": true\n}"
				},
				"url": {
					"raw": "{{baseUrl}}/{{apiVersion}}/employees",
					"host": ["{{baseUrl}}"],
					"path": ["{{apiVersion}}", "employees"]
				}
			},
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Employee created successfully', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test('Response contains created employee data', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.success).to.be.true;",
							"    pm.expect(response.data).to.have.property('id');",
							"    pm.expect(response.data.firstName).to.equal('Test');",
							"    pm.expect(response.data.lastName).to.equal('Employee');",
							"    pm.expect(response.data.email).to.equal('test.employee@company.com');",
							"    ",
							"    // Store the created employee ID for subsequent tests",
							"    pm.collectionVariables.set('createdEmployeeId', response.data.id);",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			]
		},
		{
			"name": "3. Verify Created Employee",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/{{apiVersion}}/employees/{{createdEmployeeId}}",
					"host": ["{{baseUrl}}"],
					"path": ["{{apiVersion}}", "employees", "{{createdEmployeeId}}"]
				}
			},
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Employee retrieved successfully', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test('Retrieved employee has correct data', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.success).to.be.true;",
							"    pm.expect(response.data.firstName).to.equal('Test');",
							"    pm.expect(response.data.department).to.equal('QA');",
							"    pm.expect(response.data.isActive).to.be.true;",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			]
		},
		{
			"name": "4. Update Test Employee",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"firstName\": \"Updated\",\n  \"lastName\": \"Employee\",\n  \"email\": \"updated.employee@company.com\",\n  \"phone\": \"+1-555-0199\",\n  \"department\": \"QA\",\n  \"position\": \"Senior Test Engineer\",\n  \"salary\": 85000.00,\n  \"hireDate\": \"2024-01-01\",\n  \"managerId\": null,\n  \"isActive\": true\n}"
				},
				"url": {
					"raw": "{{baseUrl}}/{{apiVersion}}/employees/{{createdEmployeeId}}",
					"host": ["{{baseUrl}}"],
					"path": ["{{apiVersion}}", "employees", "{{createdEmployeeId}}"]
				}
			},
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Employee updated successfully', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test('Updated employee has new data', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.success).to.be.true;",
							"    pm.expect(response.data.firstName).to.equal('Updated');",
							"    pm.expect(response.data.position).to.equal('Senior Test Engineer');",
							"    pm.expect(response.data.salary).to.equal(85000);",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			]
		},
		{
			"name": "5. Test Pagination",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/{{apiVersion}}/employees/paginated?page=0&size=5&sortBy=firstName&sortDirection=asc",
					"host": ["{{baseUrl}}"],
					"path": ["{{apiVersion}}", "employees", "paginated"],
					"query": [
						{
							"key": "page",
							"value": "0"
						},
						{
							"key": "size",
							"value": "5"
						},
						{
							"key": "sortBy",
							"value": "firstName"
						},
						{
							"key": "sortDirection",
							"value": "asc"
						}
					]
				}
			},
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Pagination works correctly', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test('Paginated response has correct structure', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.success).to.be.true;",
							"    pm.expect(response.data).to.have.property('content');",
							"    pm.expect(response.data).to.have.property('totalElements');",
							"    pm.expect(response.data).to.have.property('totalPages');",
							"    pm.expect(response.data.size).to.equal(5);",
							"    pm.expect(response.data.number).to.equal(0);",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			]
		},
		{
			"name": "6. Test Department Filter",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/{{apiVersion}}/employees/department/QA",
					"host": ["{{baseUrl}}"],
					"path": ["{{apiVersion}}", "employees", "department", "QA"]
				}
			},
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Department filter works', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test('All returned employees are from QA department', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.success).to.be.true;",
							"    ",
							"    if (response.data && response.data.length > 0) {",
							"        response.data.forEach(employee => {",
							"            pm.expect(employee.department).to.equal('QA');",
							"        });",
							"    }",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			]
		},
		{
			"name": "7. Test Validation Errors",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"firstName\": \"\",\n  \"lastName\": \"\",\n  \"email\": \"invalid-email\",\n  \"phone\": \"123456789012345678901234567890\",\n  \"department\": \"\",\n  \"position\": \"\",\n  \"salary\": -5000,\n  \"hireDate\": \"invalid-date\",\n  \"managerId\": null,\n  \"isActive\": true\n}"
				},
				"url": {
					"raw": "{{baseUrl}}/{{apiVersion}}/employees",
					"host": ["{{baseUrl}}"],
					"path": ["{{apiVersion}}", "employees"]
				}
			},
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Validation errors are handled properly', function () {",
							"    pm.response.to.have.status(400);",
							"});",
							"",
							"pm.test('Error response contains validation details', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.success).to.be.false;",
							"    pm.expect(response.message).to.include('Validation');",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			]
		},
		{
			"name": "8. Test 404 Error",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/{{apiVersion}}/employees/99999",
					"host": ["{{baseUrl}}"],
					"path": ["{{apiVersion}}", "employees", "99999"]
				}
			},
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('404 error handled correctly', function () {",
							"    pm.response.to.have.status(404);",
							"});",
							"",
							"pm.test('Error response has proper format', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.success).to.be.false;",
							"    pm.expect(response.message).to.include('not found');",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			]
		},
		{
			"name": "9. Delete Test Employee",
			"request": {
				"method": "DELETE",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/{{apiVersion}}/employees/{{createdEmployeeId}}",
					"host": ["{{baseUrl}}"],
					"path": ["{{apiVersion}}", "employees", "{{createdEmployeeId}}"]
				}
			},
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Employee deleted successfully', function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test('Delete response confirms action', function () {",
							"    const response = pm.response.json();",
							"    pm.expect(response.success).to.be.true;",
							"    pm.expect(response.message).to.include('deleted');",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			]
		},
		{
			"name": "10. Verify Employee is Deactivated",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/{{apiVersion}}/employees/{{createdEmployeeId}}",
					"host": ["{{baseUrl}}"],
					"path": ["{{apiVersion}}", "employees", "{{createdEmployeeId}}"]
				}
			},
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('Accessing deleted employee returns appropriate response', function () {",
							"    // This could be 404 or 200 with isActive: false depending on implementation",
							"    pm.expect([200, 404]).to.include(pm.response.code);",
							"});",
							"",
							"if (pm.response.code === 200) {",
							"    pm.test('Deleted employee is marked as inactive', function () {",
							"        const response = pm.response.json();",
							"        pm.expect(response.data.isActive).to.be.false;",
							"    });",
							"}",
							""
						],
						"type": "text/javascript"
					}
				}
			]
		}
	]
}